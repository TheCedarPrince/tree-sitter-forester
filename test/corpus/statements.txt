================================================================================
Prim
================================================================================

\p{hello}
\p{
    \ul{
        \li{asdf}
        \li{foobar}
        \code{echo hello}
      }
  }

--------------------------------------------------------------------------------

(source_file
  (head_node
    (prim
      (p
        (arg
          (textual_expr
            (textual_node
              (text)))))))
  (head_node
    (prim
      (p
        (arg
          (textual_expr
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (prim
                  (ul
                    (arg
                      (textual_expr
                        (textual_node
                          (whitespace))
                        (textual_node
                          (head_node
                            (prim
                              (li
                                (arg
                                  (textual_expr
                                    (textual_node
                                      (text))))))))
                        (textual_node
                          (whitespace))
                        (textual_node
                          (head_node
                            (prim
                              (li
                                (arg
                                  (textual_expr
                                    (textual_node
                                      (text))))))))
                        (textual_node
                          (whitespace))
                        (textual_node
                          (head_node
                            (prim
                              (code
                                (arg
                                  (textual_expr
                                    (textual_node
                                      (text))
                                    (textual_node
                                      (whitespace))
                                    (textual_node
                                      (text))))))))
                        (textual_node
                          (whitespace))))))))
            (textual_node
              (whitespace))))))))

================================================================================
Link
================================================================================

\p{[asdf](foo-0001)}

\p{[[foo-0001]]}

--------------------------------------------------------------------------------

(source_file
  (head_node
    (prim
      (p
        (arg
          (textual_expr
            (textual_node
              (head_node
                (link
                  (markdown_link
                    (link_label
                      (wstext
                        (ws_or_text
                          (text))))
                    (link_dest
                      (wstext
                        (ws_or_text
                          (text)))))))))))))
  (head_node
    (prim
      (p
        (arg
          (textual_expr
            (textual_node
              (head_node
                (link
                  (unlabeled_link
                    (external_link
                      (text))))))))))))

================================================================================
Date
================================================================================

\date{2023-12-25}

--------------------------------------------------------------------------------

(source_file
  (head_node
    (date
      (year)
      (month)
      (day))))

================================================================================
Title
================================================================================

\title{My Title}

--------------------------------------------------------------------------------

(source_file
  (head_node
    (title
      (arg
        (textual_expr
          (textual_node
            (text))
          (textual_node
            (whitespace))
          (textual_node
            (text)))))))

================================================================================
Transclusion
================================================================================

\transclude{nvm-0002}

--------------------------------------------------------------------------------

(source_file
  (head_node
    (transclude
      (addr
        (prefix
          (alpha)
          (alpha)
          (alpha))
        (id
          (digit)
          (digit)
          (digit)
          (digit))))))

================================================================================
Math
================================================================================

\p{ ##{a = b} }
\p{ #{a = b}}

--------------------------------------------------------------------------------

(source_file
  (head_node
    (prim
      (p
        (arg
          (textual_expr
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (display_math
                  (textual_expr
                    (textual_node
                      (text))
                    (textual_node
                      (whitespace))
                    (textual_node
                      (text))
                    (textual_node
                      (whitespace))
                    (textual_node
                      (text))))))
            (textual_node
              (whitespace)))))))
  (head_node
    (prim
      (p
        (arg
          (textual_expr
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (inline_math
                  (textual_expr
                    (textual_node
                      (text))
                    (textual_node
                      (whitespace))
                    (textual_node
                      (text))
                    (textual_node
                      (whitespace))
                    (textual_node
                      (text))))))))))))

================================================================================
Comment
================================================================================

% lorem ipsum

--------------------------------------------------------------------------------

(source_file
  (head_node
    (comment)))

================================================================================
Function Definition
================================================================================

\def\foo[x][y][z]{
  \p{\x \y \z}
  \transclude{foo-0001}
}

--------------------------------------------------------------------------------

(source_file
  (head_node
    (def
      (fun_spec
        (ident
          (alpha)
          (alpha)
          (alpha))
        (text)
        (text)
        (text)
        (arg
          (textual_expr
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (prim
                  (p
                    (arg
                      (textual_expr
                        (textual_node
                          (head_node
                            (ident
                              (alpha))))
                        (textual_node
                          (whitespace))
                        (textual_node
                          (head_node
                            (ident
                              (alpha))))
                        (textual_node
                          (whitespace))
                        (textual_node
                          (head_node
                            (ident
                              (alpha))))))))))
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (transclude
                  (addr
                    (prefix
                      (alpha)
                      (alpha)
                      (alpha))
                    (id
                      (digit)
                      (digit)
                      (digit)
                      (digit))))))))))))

================================================================================
Links Prim
================================================================================

\p{
    [asdf](foo-0001)
    \ul{
        \li{[[asdf/asdf.pdf]]}
      }
    [asdf](foo-0001)

  }

--------------------------------------------------------------------------------

(source_file
  (head_node
    (prim
      (p
        (arg
          (textual_expr
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (link
                  (markdown_link
                    (link_label
                      (wstext
                        (ws_or_text
                          (text))))
                    (link_dest
                      (wstext
                        (ws_or_text
                          (text))))))))
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (prim
                  (ul
                    (arg
                      (textual_expr
                        (textual_node
                          (whitespace))
                        (textual_node
                          (head_node
                            (prim
                              (li
                                (arg
                                  (textual_expr
                                    (textual_node
                                      (head_node
                                        (link
                                          (unlabeled_link
                                            (external_link
                                              (text))))))))))))
                        (textual_node
                          (whitespace))))))))
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (link
                  (markdown_link
                    (link_label
                      (wstext
                        (ws_or_text
                          (text))))
                    (link_dest
                      (wstext
                        (ws_or_text
                          (text))))))))
            (textual_node
              (whitespace))))))))

================================================================================
Queries
================================================================================


\scope{
  \put\transclude/title{featured talks}
  \query/author{jonmsterling}
}

--------------------------------------------------------------------------------

(source_file
  (head_node
    (scope
      (arg
        (textual_expr
          (textual_node
            (whitespace))
          (textual_node
            (head_node
              (put
                (ident
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha))
                (arg
                  (textual_expr
                    (textual_node
                      (text))
                    (textual_node
                      (whitespace))
                    (textual_node
                      (text)))))))
          (textual_node
            (whitespace))
          (textual_node
            (head_node
              (author
                (ERROR)
                (txt_arg
                  (wstext
                    (ws_or_text
                      (text))))))))))))

================================================================================
Full
================================================================================

\title{My Title}
\p{hello}
\transclude{nvm-0002}
\p{
    \ul{
        \li{asdf}
        \li{foobar}
      }
  [asdf](foo-0001) [[foo-0001]]
  \code{asdlfkjasfd}
}

\scope{
  \put\transclude/title{featured talks}
  \query/author{jonmsterling}
}

--------------------------------------------------------------------------------

(source_file
  (head_node
    (title
      (arg
        (textual_expr
          (textual_node
            (text))
          (textual_node
            (whitespace))
          (textual_node
            (text))))))
  (head_node
    (prim
      (p
        (arg
          (textual_expr
            (textual_node
              (text)))))))
  (head_node
    (transclude
      (addr
        (prefix
          (alpha)
          (alpha)
          (alpha))
        (id
          (digit)
          (digit)
          (digit)
          (digit)))))
  (head_node
    (prim
      (p
        (arg
          (textual_expr
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (prim
                  (ul
                    (arg
                      (textual_expr
                        (textual_node
                          (whitespace))
                        (textual_node
                          (head_node
                            (prim
                              (li
                                (arg
                                  (textual_expr
                                    (textual_node
                                      (text))))))))
                        (textual_node
                          (whitespace))
                        (textual_node
                          (head_node
                            (prim
                              (li
                                (arg
                                  (textual_expr
                                    (textual_node
                                      (text))))))))
                        (textual_node
                          (whitespace))))))))
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (link
                  (markdown_link
                    (link_label
                      (wstext
                        (ws_or_text
                          (text))))
                    (link_dest
                      (wstext
                        (ws_or_text
                          (text))))))))
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (link
                  (unlabeled_link
                    (external_link
                      (text))))))
            (textual_node
              (whitespace))
            (textual_node
              (head_node
                (prim
                  (code
                    (arg
                      (textual_expr
                        (textual_node
                          (text)))))))))))))
  (head_node
    (scope
      (arg
        (textual_expr
          (textual_node
            (whitespace))
          (textual_node
            (head_node
              (put
                (ident
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha)
                  (alpha))
                (arg
                  (textual_expr
                    (textual_node
                      (text))
                    (textual_node
                      (whitespace))
                    (textual_node
                      (text)))))))
          (textual_node
            (whitespace))
          (textual_node
            (head_node
              (author
                (ERROR)
                (txt_arg
                  (wstext
                    (ws_or_text
                      (text))))))))))))
