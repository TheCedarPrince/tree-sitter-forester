================================================================================
Text
================================================================================

\p{Adsf! Adfds, sadfklje, asdflkj? aldkfja. }

--------------------------------------------------------------------------------

(source_file
  (p
    (arg
      (text))))

================================================================================
Meta
================================================================================

\meta{external}{https://github.com/kentookura}

--------------------------------------------------------------------------------

(source_file
  (meta
    (text)
    (arg
      (text))))

================================================================================
Tags
================================================================================

\tag{foo}
\tag{baz-bar}

--------------------------------------------------------------------------------

(source_file
  (tag
    (text))
  (tag
    (text)))

================================================================================
Author
================================================================================

\author{Kento Okura}

--------------------------------------------------------------------------------

(source_file
  (author
    (text)))

================================================================================
Import
================================================================================

\import{asd-053X}

--------------------------------------------------------------------------------

(source_file
  (import
    (addr
      (prefix)
      (id))))

================================================================================
Export
================================================================================

\export{asd-053X}

--------------------------------------------------------------------------------

(source_file
  (export
    (addr
      (prefix)
      (id))))

================================================================================
Iftex
================================================================================

\iftex{foo}{bar}

--------------------------------------------------------------------------------

(source_file
  (if_tex
    (arg
      (text))
    (arg
      (text))))

================================================================================
Date
================================================================================

\date{2023-02-08T12:03:12Z}
\date{2023-02-08}

--------------------------------------------------------------------------------

(source_file
  (date
    (text))
  (date
    (text)))

================================================================================
Title
================================================================================

\title{My Title}

--------------------------------------------------------------------------------

(source_file
  (title
    (arg
      (text))))

================================================================================
Transclusion
================================================================================

\transclude{nvm-0002}

--------------------------------------------------------------------------------

(source_file
  (transclude
    (addr
      (prefix)
      (id))))

================================================================================
Ident
================================================================================

\p{\foo{asdf}}

--------------------------------------------------------------------------------

(source_file
  (p
    (arg
      (ident
        (text)
        (arg
          (text))))))

================================================================================
Inline Math
================================================================================

\p{
    #{E}

}
--------------------------------------------------------------------------------

(source_file
  (p
    (arg
      (text)
      (inline_math
        (arg
          (text))))))

================================================================================
Display Math
================================================================================

\p{
    ##{E}

}
--------------------------------------------------------------------------------

(source_file
  (p
    (arg
      (text)
      (display_math
        (arg
          (text))))))

================================================================================
Math Text
================================================================================

\p{
    ##{E}
}
\p{
  ##{E} asdf #{asdf}
}

\p{
  ##{E}, texttexttext #{textext}, textext.
}
--------------------------------------------------------------------------------

(source_file
  (p
    (arg
      (text)
      (display_math
        (arg
          (text)))))
  (p
    (arg
      (text)
      (display_math
        (arg
          (text)))
      (text)
      (inline_math
        (arg
          (text)))))
  (p
    (arg
      (text)
      (display_math
        (arg
          (text)))
      (text)
      (inline_math
        (arg
          (text)))
      (text))))

================================================================================
Math Commands
================================================================================

\p{
  ##{\f\relax{x} = \int_{-\infty}^\infty
  \f\hat\xi\,e^{2 \pi i \xi x}
  \,d\xi}

}
--------------------------------------------------------------------------------

(source_file
  (p
    (arg
      (text)
      (display_math
        (arg
          (ident
            (text))
          (ident
            (text)
            (arg
              (text)))
          (text)
          (ident
            (text)
            (arg
              (text)
              (ident
                (text))))
          (text)
          (ident
            (text))
          (text)
          (ident
            (text))
          (ident
            (text))
          (ident
            (text))
          (ident
            (text)
            (arg
              (text)
              (ident
                (text))
              (ident
                (text))))
          (text)
          (ident
            (text))
          (ident
            (text)))))))

================================================================================
Comment
================================================================================

% lorem ipsum

--------------------------------------------------------------------------------

(source_file
  (comment))

================================================================================
Function Definition
================================================================================

\def\foo[x][y][z]{
\p{\x \y \z}
\transclude{foo-0001}
}

--------------------------------------------------------------------------------

(source_file
  (def
    (fun_spec
      (ident
        (text))
      (binder
        (text)
        (text)
        (text))
      (arg
        (p
          (arg
            (ident
              (text))
            (ident
              (text))
            (ident
              (text))))
        (transclude
          (addr
            (prefix)
            (id)))))))

================================================================================
Prim
================================================================================

\p{
  [asdf](foo-0001)
  \ul{
      \li{[[asdf/asdf.pdf]]}
      }
    [asdf](foo-0001)

  }

--------------------------------------------------------------------------------

(source_file
  (p
    (arg
      (text)
      (markdown_link
        (link_label)
        (link_dest
          (text)))
      (text)
      (ul
        (arg
          (text)
          (li
            (arg
              (unlabeled_link
                (external_link
                  (text)))))
          (text)))
      (text)
      (markdown_link
        (link_label)
        (link_dest
          (text)))
      (text))))

================================================================================
Scope
================================================================================


\scope{
  \put\transclude/title{featured talks}
}

--------------------------------------------------------------------------------

(source_file
  (scope
    (arg
      (text)
      (put
        (ident
          (text))
        (arg
          (text))))))

================================================================================
Query
================================================================================

\query{
  \query/and{
    \query/author{jonmsterling}
    \query/taxon{reference}
    \query/tag{featured}
  }
}

--------------------------------------------------------------------------------

(source_file
  (query_tree
    (query
      (query0
        (query_and
          (queries
            (query0
              (query_author
                (arg
                  (text))))
            (query0
              (query_taxon
                (arg
                  (text))))
            (query0
              (query_tag
                (arg
                  (text))))))))))

================================================================================
Objects
================================================================================

\def\my-object{
  \object[self]{
    [method1]{
      the implementation of this method
    }
    [method2]{
      the implementation of another method
      \self#method1
    }
  }
}

--------------------------------------------------------------------------------

(source_file
  (def
    (fun_spec
      (ident
        (text))
      (arg
        (text)
        (object
          (text)
          (method_decl
            (method
              (text)
              (method_body
                (arg
                  (text)
                  (text)))))
          (method_decl
            (method
              (text)
              (method_body
                (arg
                  (text)
                  (text)
                  (ident
                    (text))
                  (ERROR)
                  (text))))))))))

================================================================================
Patch
================================================================================

\patch{\my-object}[self]{
  [method1]{
    \self/super#method1
    some further code
  }
}

--------------------------------------------------------------------------------

(source_file
  (patch
    (arg
      (ident
        (text)))
    (text)
    (method_decl
      (method
        (text)
        (method_body
          (arg
            (text)
            (ident
              (text))
            (ERROR)
            (text)))))))

================================================================================
Full
================================================================================

\title{My Title}
\p{hello}
\transclude{nvm-0002}
\p{
    \ul{
        \li{asdf}
        \li{foobar}
      }
  [asdf](foo-0001) [[foo-0001]]
  \code{asdlfkjasfd}
}

\block{
  [asdf](foo-0001) [[foo-0001]]
  \code{asdlfkjasfd}
  }

\def\my-object{
  \object[self]{
    [method1]{
      the implementation of this method
    }
    [method2]{
      the implementation of another method
      \self#method1
    }
  }
}

\patch{\my-object}[self]{
  [method1]{
    \self/super#method1
    some further code
  }
}

\table{
  \row{[forester query ](gld-0008)}{[[https://git.sr.ht/~kentookura/ocaml-forester/tree/nvim-support]]}
  \row{[forester-lsp](gld-0003)}{[[https://git.sr.ht/~kentookura/ocaml-forester/tree/lsp]]}
  \row{[more/better output ](gld-0007)}{N.A.}
  \row{[richer interactivity ](gld-0006)}{N.A.}
  \row{[pandoc filter](gld-000C)}{N.A.}
}




\scope{
  \put\transclude/titly{featured talks}
  \query{
    \query/author{jonmsterling}
  }
}

--------------------------------------------------------------------------------

(source_file
  (title
    (arg
      (text)))
  (p
    (arg
      (text)))
  (transclude
    (addr
      (prefix)
      (id)))
  (p
    (arg
      (text)
      (ul
        (arg
          (text)
          (li
            (arg
              (text)))
          (text)
          (li
            (arg
              (text)))
          (text)))
      (text)
      (markdown_link
        (link_label)
        (link_dest
          (text)))
      (text)
      (unlabeled_link
        (external_link
          (text)))
      (text)
      (code
        (arg
          (text)))))
  (ERROR
    (arg
      (text)
      (markdown_link
        (link_label)
        (link_dest
          (text)))
      (text)
      (unlabeled_link
        (external_link
          (text)))
      (text)
      (code
        (arg
          (text)))
      (text)))
  (def
    (fun_spec
      (ident
        (text))
      (arg
        (text)
        (object
          (text)
          (method_decl
            (method
              (text)
              (method_body
                (arg
                  (text)
                  (text)))))
          (method_decl
            (method
              (text)
              (method_body
                (arg
                  (text)
                  (text)
                  (ident
                    (text))
                  (ERROR)
                  (text)))))))))
  (patch
    (arg
      (ident
        (text)))
    (text)
    (method_decl
      (method
        (text)
        (method_body
          (arg
            (text)
            (ident
              (text))
            (ERROR)
            (text))))))
  (ident
    (text)
    (arg
      (text)
      (ident
        (text)
        (arg
          (markdown_link
            (link_label)
            (link_dest
              (text)))))
      (ERROR)
      (unlabeled_link
        (external_link
          (text)))))
  (ident
    (text)
    (arg
      (markdown_link
        (link_label)
        (link_dest
          (text)))))
  (ERROR)
  (unlabeled_link
    (external_link
      (text)))
  (ERROR)
  (ident
    (text)
    (arg
      (markdown_link
        (link_label)
        (link_dest
          (text)))))
  (ERROR
    (UNEXPECTED '.')
    (UNEXPECTED '.'))
  (ident
    (text)
    (arg
      (markdown_link
        (link_label)
        (link_dest
          (text)))))
  (ERROR
    (UNEXPECTED '.')
    (UNEXPECTED '.'))
  (ident
    (text)
    (arg
      (markdown_link
        (link_label)
        (link_dest
          (text)))))
  (ERROR
    (UNEXPECTED '.')
    (UNEXPECTED '.'))
  (scope
    (arg
      (text)
      (put
        (ident
          (text))
        (arg
          (text)))
      (text)
      (query_tree
        (query
          (query0
            (query_author
              (arg
                (text)))))))))
