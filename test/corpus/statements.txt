================================================================================
Author
================================================================================

\author{Kento Okura}

--------------------------------------------------------------------------------

(source_file
  (author
    (text)
    (text)))

================================================================================
Import
================================================================================

\import{asd-053X}

--------------------------------------------------------------------------------

(source_file
  (import
    (addr
      (prefix)
      (id))))

================================================================================
Export
================================================================================

\export{asd-053X}

--------------------------------------------------------------------------------

(source_file
  (export
    (addr
      (prefix)
      (id))))

================================================================================
Iftex
================================================================================

\iftex{foo}{bar}

--------------------------------------------------------------------------------

(source_file
  (if_tex
    (text)
    (text)))

================================================================================
Date
================================================================================

\date{2023-02-08T12:03:12Z}
\date{2023-02-08}

--------------------------------------------------------------------------------

(source_file
  (date
    (text))
  (date
    (text)))

================================================================================
Title
================================================================================

\title{My Title}

--------------------------------------------------------------------------------

(source_file
  (title
    (text)
    (text)))

================================================================================
Transclusion
================================================================================

\transclude{nvm-0002}

--------------------------------------------------------------------------------

(source_file
  (transclude
    (addr
      (prefix)
      (id))))

================================================================================
Math
================================================================================

\p{ ##{a = b} }
\p{ #{a = b}}

--------------------------------------------------------------------------------

(source_file
  (p
    (display_math
      (text)
      (text)
      (text)))
  (p
    (inline_math
      (text)
      (text)
      (text))))

================================================================================
Comment
================================================================================

% lorem ipsum

--------------------------------------------------------------------------------

(source_file
  (comment))

================================================================================
Function Definition
================================================================================

\def\foo[x][y][z]{
  \p{\x \y \z}
  \transclude{foo-0001}
}

--------------------------------------------------------------------------------

(source_file
  (def
    (fun_spec
      (ident)
      (binder
        (text)
        (text)
        (text))
      (p
        (ident)
        (ident)
        (ident))
      (transclude
        (addr
          (prefix)
          (id))))))

================================================================================
Prim
================================================================================

\p{
    [asdf](foo-0001)
    \ul{
        \li{[[asdf/asdf.pdf]]}
      }
    [asdf](foo-0001)

  }

--------------------------------------------------------------------------------

(source_file
  (p
    (markdown_link
      (link_label
        (text))
      (link_dest
        (text)))
    (ul
      (li
        (unlabeled_link
          (external_link
            (text)))))
    (markdown_link
      (link_label
        (text))
      (link_dest
        (text)))))

================================================================================
Scope
================================================================================


\scope{
  \put\transclude/title{featured talks}
}

--------------------------------------------------------------------------------

(source_file
  (scope
    (put
      (ident)
      (text)
      (text))))

================================================================================
Query
================================================================================

\query{
  \query/and{
    \query/author{jonmsterling}
    \query/taxon{reference}
    \query/tag{featured}
  }
}

--------------------------------------------------------------------------------

(source_file
  (query_tree
    (query
      (query0
        (query_and
          (queries
            (query0
              (query_author
                (text)))
            (query0
              (query_taxon
                (text)))
            (query0
              (query_tag
                (text)))))))))

================================================================================
Objects
================================================================================

\def\my-object{
  \object[self]{
    [method1]{
      the implementation of this method
    }
    [method2]{
      the implementation of another method
      \self#method1
    }
  }
}

--------------------------------------------------------------------------------

(source_file
  (def
    (fun_spec
      (ident)
      (object
        (text)
        (method_decl
          (method
            (text)
            (method_body
              (text)
              (text)
              (text)
              (text)
              (text))))
        (method_decl
          (method
            (text)
            (method_body
              (text)
              (text)
              (text)
              (text)
              (text)
              (ident)
              (text))))))))

================================================================================
Patch
================================================================================

\patch{\my-object}[self]{
  [method1]{
    \self/super#method1
    some further code
  }
}

--------------------------------------------------------------------------------

(source_file
  (patch
    (code_expr
      (ident))
    (text)
    (method_decl
      (method
        (text)
        (method_body
          (ident)
          (text)
          (text)
          (text)
          (text))))))

================================================================================
Full
================================================================================

\title{My Title}
\p{hello}
\transclude{nvm-0002}
\p{
    \ul{
        \li{asdf}
        \li{foobar}
      }
  [asdf](foo-0001) [[foo-0001]]
  \code{asdlfkjasfd}
}

\block{
  [asdf](foo-0001) [[foo-0001]]
  \code{asdlfkjasfd}
  }

\def\my-object{
  \object[self]{
    [method1]{
      the implementation of this method
    }
    [method2]{
      the implementation of another method
      \self#method1
    }
  }
}


\scope{
  \put\transclude/titly{featured talks}
  \query{
    \query/author{jonmsterling}
  }
}

--------------------------------------------------------------------------------

(source_file
  (title
    (text)
    (text))
  (p
    (text))
  (transclude
    (addr
      (prefix)
      (id)))
  (p
    (ul
      (li
        (text))
      (li
        (text)))
    (markdown_link
      (link_label
        (text))
      (link_dest
        (text)))
    (unlabeled_link
      (external_link
        (text)))
    (code
      (text)))
  (block
    (markdown_link
      (link_label
        (text))
      (link_dest
        (text)))
    (unlabeled_link
      (external_link
        (text)))
    (code
      (text))
    (ERROR)
    (object
      (text)
      (method_decl
        (method
          (text)
          (method_body
            (text)
            (text)
            (text)
            (text)
            (text))))
      (method_decl
        (method
          (text)
          (method_body
            (text)
            (text)
            (text)
            (text)
            (text)
            (ident)
            (text))))))
  (scope
    (put
      (ident)
      (text)
      (text))
    (query_tree
      (query
        (query0
          (query_author
            (text)))))))
